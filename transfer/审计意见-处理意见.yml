app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: å®¡è®¡æ„è§-å¤„ç†æ„è§
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: package
  value:
    plugin_unique_identifier: langgenius/openai_api_compatible:0.0.30@31e293f39e1ce22dd80546de27b36ce35db5a767e86e800c36fff6f53cdfc118
- current_identifier: null
  type: package
  value:
    plugin_unique_identifier: langgenius/ollama:0.1.2@1312dc6fbd53ce097f57dc9f6ca21212f7e0d99461f730020d5bc558e9fe7bc6
kind: app
version: 0.3.1
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - document
      allowed_file_upload_methods:
      - remote_url
      - local_file
      enabled: true
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: document-extractor
      id: 1768897517091-source-1768897898184-target
      source: '1768897517091'
      sourceHandle: source
      target: '1768897898184'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: document-extractor
        targetType: llm
      id: 1768897898184-source-llm-target
      source: '1768897898184'
      sourceHandle: source
      target: llm
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '1768900126443'
        sourceType: iteration-start
        targetType: code
      id: 1768900126443start-source-1768900183542-target
      source: 1768900126443start
      sourceHandle: source
      target: '1768900183542'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '1768900126443'
        sourceType: code
        targetType: llm
      id: 1768900183542-source-1768900189250-target
      source: '1768900183542'
      sourceHandle: source
      target: '1768900189250'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: llm-source-1768900205298-target
      source: llm
      sourceHandle: source
      target: '1768900205298'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: iteration
      id: 1768900205298-source-1768900126443-target
      source: '1768900205298'
      sourceHandle: source
      target: '1768900126443'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: code
      id: 1768900126443-source-1768905043926-target
      source: '1768900126443'
      sourceHandle: source
      target: '1768905043926'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: answer
      id: 1768905043926-source-answer-target
      source: '1768905043926'
      sourceHandle: source
      target: answer
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables: []
      height: 54
      id: '1768897517091'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            enable_thinking: false
            temperature: 0.7
          mode: chat
          name: DeepSeek-R1-Distill-Llama-70B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 37a8cada-1882-459c-9321-c0f24a22e96a
          role: system
          text: "ä½ æ˜¯ä¸€ä¸ªè‡ªç„¶èµ„æºèµ„äº§å®¡è®¡ä¸“å®¶ï¼Œéœ€è¦æ•´åˆå®¡è®¡åº•ç¨¿çš„å®¡è®¡è®¤å®šçš„è¦åŠå®¡è®¡ç»“è®ºï¼Œè¿›è¡Œåˆ†ç±»å½’çº³å¹¶å½¢æˆå®¡è®¡æ„è§çš„â€œä¸‰ã€å®¡è®¡å‘ç°çš„ä¸»è¦é—®é¢˜å’Œå¤„ç†æ„è§â€éƒ¨åˆ†çš„äºŒçº§æ ‡é¢˜å’Œä¸‰çº§æ ‡é¢˜ï¼ˆå¦‚æœéœ€è¦ï¼‰\n\
            è¾“å‡ºä¸¥æ ¼ä½¿ç”¨å¦‚ä¸‹ JSON ç»“æ„ï¼š\n{\n  â€œchapter_noâ€: â€œä¸‰â€,\n  â€œchapter_titleâ€: â€œå®¡è®¡å‘ç°çš„ä¸»è¦é—®é¢˜å’Œå¤„ç†æ„è§â€,\n\
            \  â€œitemsâ€: [\n    {\n      â€œorderâ€: 1,\n      â€œfirst_idâ€: â€œä¸€â€,\n    \
            \  â€œfirst_markerâ€: â€œï¼ˆä¸€ï¼‰â€,\n      â€œfirst_titleâ€: â€œâ€¦â€,\n      â€œsecond_idâ€:\
            \ â€œ1â€,\n      â€œsecond_markerâ€: â€œ1.â€,\n      â€œsecond_titleâ€: â€œâ€¦â€,\n   \
            \   â€œkey_pointsâ€: [â€â€¦â€, â€œâ€¦â€]\n    }\n  // â€¦\n  ]\n}\n\nåªè¾“å‡º JSONï¼Œä¸è¦å¤šä½™è¯´æ˜ã€‚"
        - id: ba80076a-e62b-4ad4-a20c-132e9da7c48e
          role: user
          text: 'è¦æ±‚ï¼š

            1.äºŒçº§æ ‡é¢˜çš„æ ‡å·å¦‚â€ï¼ˆä¸€ï¼‰ï¼ˆäºŒï¼‰ï¼ˆä¸‰ï¼‰â€œ

            2.ä¸‰çº§æ ‡é¢˜çš„æ ‡å·å¦‚â€1. 2. 3.â€œ

            2.å¯¹{{#1768897898184.text#}}è¿›è¡Œåˆ†ç±»å½’çº³æ€»ç»“æˆå¤šç±»é—®é¢˜ï¼Œå¦‚â€ï¼ˆä¸€ï¼‰åœ°è¡¨æ°´èµ„æºé‡é€å¹´å‡å°‘â€œæ¯ä¸ªäºŒçº§æ ‡é¢˜å¯¹åº”ä¸€ç±»é—®é¢˜ï¼Œæ¯ä¸ªä¸‰çº§æ ‡é¢˜å¯¹åº”ä¸€ä¸ªé—®é¢˜ï¼ˆä¸€ç±»é—®é¢˜ä¸‹å¯èƒ½å­˜åœ¨å¤šä¸ªé—®é¢˜ï¼Œæ¯”å¦‚ï¼ˆäºŒï¼‰æ±¡æ°´å¤„ç†æ–¹é¢åŒ…å«1.æ±¡æ°´å¤„ç†å‚ç®¡ç†é—®é¢˜2.éƒ¨åˆ†æ±¡æ°´å¤„ç†å‚å‡ºå‚æ°´è´¨æŒ‡æ ‡æ£€æµ‹ä¸å…¨

            æŒ‰ç…§æç¤ºè¯æ¨¡æ¿è¦æ±‚ï¼Œç”Ÿæˆâ€œä¸‰ã€å®¡è®¡å‘ç°çš„ä¸»è¦é—®é¢˜å’Œå¤„ç†æ„è§â€ç›®å½•ç»“æ„ï¼Œä»¥jsonå½¢å¼è¾“å‡ºã€‚

            '
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              chapter_no:
                type: string
              chapter_title:
                type: string
              items:
                items:
                  additionalProperties: false
                  properties:
                    first_id:
                      type: string
                    first_marker:
                      type: string
                    first_title:
                      type: string
                    key_points:
                      items:
                        type: string
                      type: array
                    order:
                      type: number
                    second_id:
                      type: string
                    second_marker:
                      type: string
                    second_title:
                      type: string
                  required:
                  - order
                  - first_id
                  - first_marker
                  - first_title
                  - key_points
                  type: object
                type: array
            required:
            - chapter_no
            - chapter_title
            - items
            type: object
        structured_output_enabled: true
        title: ç”Ÿæˆç›®å½•
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: llm
      position:
        x: 675.9054118488807
        y: 282
      positionAbsolute:
        x: 675.9054118488807
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1768905043926.merged_markdown#}}'
        desc: ''
        selected: true
        title: ç›´æ¥å›å¤
        type: answer
        variables: []
      height: 105
      id: answer
      position:
        x: 2504.64914225091
        y: 299.6388937035453
      positionAbsolute:
        x: 2504.64914225091
        y: 299.6388937035453
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_array_file: true
        selected: false
        title: æ–‡æ¡£æå–å™¨
        type: document-extractor
        variable_selector:
        - sys
        - files
      height: 94
      id: '1768897898184'
      position:
        x: 377.10546159042985
        y: 276.21092318085965
      positionAbsolute:
        x: 377.10546159042985
        y: 276.21092318085965
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        error_handle_mode: terminated
        height: 177
        is_parallel: false
        iterator_input_type: array[object]
        iterator_selector:
        - '1768900205298'
        - result
        output_selector:
        - '1768900189250'
        - text
        output_type: array[string]
        parallel_nums: 10
        selected: false
        start_node_id: 1768900126443start
        title: è¿­ä»£
        type: iteration
        width: 690
      height: 177
      id: '1768900126443'
      position:
        x: 1368.619722324257
        y: 299.6388937035453
      positionAbsolute:
        x: 1368.619722324257
        y: 299.6388937035453
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 690
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1768900126443start
      parentId: '1768900126443'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 1392.619722324257
        y: 367.6388937035453
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        code: "\ndef main(arg1) -> dict:\n    return {\n        \"order\": arg1.get(\"\
          order\", 0),\n        \"first_id\": arg1.get(\"first_id\", \"\"),\n    \
          \    \"first_marker\": arg1.get(\"first_marker\", \"\"),\n        \"first_title\"\
          : arg1.get(\"first_title\", \"\"),\n        \"second_id\": arg1.get(\"second_id\"\
          , \"\"),\n        \"second_marker\": arg1.get(\"second_marker\", \"\"),\n\
          \        \"second_title\": arg1.get(\"second_title\", \"\"),\n        \"\
          key_points\": arg1.get(\"key_points\", []),\n    }\n"
        code_language: python3
        desc: ''
        isInIteration: true
        isInLoop: false
        iteration_id: '1768900126443'
        outputs:
          first_id:
            children: null
            type: string
          first_marker:
            children: null
            type: string
          first_title:
            children: null
            type: string
          key_points:
            children: null
            type: array[string]
          order:
            children: null
            type: number
          second_id:
            children: null
            type: string
          second_marker:
            children: null
            type: string
          second_title:
            children: null
            type: string
        selected: false
        title: å¡«å……ç›®å½•
        type: code
        variables:
        - value_selector:
          - '1768900126443'
          - item
          value_type: string
          variable: arg1
      height: 54
      id: '1768900183542'
      parentId: '1768900126443'
      position:
        x: 138.13088443349557
        y: 72.18917630223848
      positionAbsolute:
        x: 1506.7506067577526
        y: 371.8280700057838
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        isInIteration: true
        isInLoop: false
        iteration_id: '1768900126443'
        model:
          completion_params:
            enable_thinking: false
            temperature: 0.7
          mode: chat
          name: DeepSeek-R1-Distill-Llama-70B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: b2801a2e-929e-498f-9187-524066a01ad9
          role: system
          text: 'ä½ æ­£åœ¨ä¸ºä¸€ä»½è‡ªç„¶èµ„æºèµ„äº§ç¦»ä»»å®¡è®¡æ–‡ä¹¦ç¼–å†™æœ¬ç« "ä¸‰ã€å®¡è®¡å‘ç°çš„ä¸»è¦é—®é¢˜å’Œå¤„ç†æ„è§"ä¸­çš„ä¸€ä¸ªäºŒçº§å°èŠ‚å†…å®¹ã€‚


            ã€æ‰€å±ä¸€çº§å°æ ‡é¢˜ã€‘


            æ ‡è¯†ï¼š{{#1768900183542.first_id#}}

            æ ‡é¢˜ï¼š{{#1768900183542.first_title#}}


            ã€å½“å‰äºŒçº§å°æ ‡é¢˜å†™ä½œä»»åŠ¡ã€‘


            ç¼–å·ï¼š{{#1768900183542.second_id#}}

            æ ‡é¢˜ï¼š{{#1768900183542.second_title#}}

            å…³é”®è¦ç‚¹ï¼š{{#1768900183542.key_points#}}

            ä¸¥æ ¼éµå¾ªæ–‡ä»¶çš„é˜è¿°ï¼š{{#1768897898184.text#}}


            è¯·æ ¹æ®ä»¥ä¸Šä¿¡æ¯ï¼Œå‚è€ƒä¸‹åˆ—ç¤ºä¾‹æ–‡é£ï¼Œç”Ÿæˆè¯¥äºŒçº§å°æ ‡é¢˜ä¸‹çš„å…·ä½“å†…å®¹ï¼š


            é¦–å…ˆè¾“å‡ºä¸€è¡Œï¼š"{{#1768900183542.first_title#}}{{#1768900183542.second_title#}}ã€‚"


            è¾“å‡ºæ ¼å¼ä¸ºçº¯æ–‡æœ¬ç‰‡æ®µï¼Œä¸è¦è¾“å‡ºæ‰€å±ä¸€çº§æ ‡é¢˜ï¼ˆå¦‚"ï¼ˆä¸€ï¼‰â€¦â€¦"ï¼‰ï¼Œåªå†™å½“å‰äºŒçº§æ ‡é¢˜åŠå…¶å…·ä½“å†…å®¹ã€‚


            é‡è¦æ ¼å¼è¦æ±‚ï¼š

            è¯·ç›´æ¥è¾“å‡º JSON å­—ç¬¦ä¸²ï¼Œä¸è¦åŒ…å« json ç­‰ Markdown æ ‡è®°ã€‚

            JSON å†…å®¹ä¸­çš„åŒå¼•å·å¿…é¡»è½¬ä¹‰ï¼ˆä¾‹å¦‚ä½¿ç”¨ \"ï¼‰ï¼Œæˆ–è€…ç¡®ä¿å†…å®¹ä¸­åªä½¿ç”¨ä¸­æ–‡å¼•å·ï¼ˆâ€œâ€ï¼‰ã€‚

            å¦‚æœå†…å®¹åŒ…å«æ¢è¡Œç¬¦ï¼Œè¯·ä½¿ç”¨ \nã€‚

            æœ€ç»ˆè¯·ç”¨å¦‚ä¸‹ JSON ç»“æ„è¿”å›ï¼š

            {

            "order": {{#1768900183542.order#}}

            "first_id": "{{#1768900183542.first_id#}}",

            "first_marker": "{{#1768900183542.first_marker#}}",

            "first_title": "{{#1768900183542.first_title#}}",

            "second_id": "{{#1768900183542.second_id#}}",

            "second_marker": "{{#1768900183542.second_marker#}}",

            "second_title": "{{#1768900183542.second_title#}}",

            "content": "è¿™é‡Œæ˜¯å®é™…ç”Ÿæˆçš„æ–‡æœ¬"

            }'
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              content:
                type: string
              first_id:
                type: string
              first_marker:
                type: string
              first_title:
                type: string
              order:
                type: number
              second_id:
                type: string
              second_marker:
                type: string
              second_title:
                type: string
            required:
            - order
            - first_id
            - first_marker
            - first_title
            - content
            type: object
        structured_output_enabled: true
        title: å†…å®¹å¡«å……
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1768900189250'
      parentId: '1768900126443'
      position:
        x: 412.93785159445497
        y: 65
      positionAbsolute:
        x: 1781.557573918712
        y: 364.6388937035453
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "\ndef main(arg1) -> dict:\n    return {\n        \"result\": arg1 \n\
          \    }\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: array[object]
        selected: false
        title: ä»£ç æ‰§è¡Œ
        type: code
        variables:
        - value_selector:
          - llm
          - structured_output
          - items
          value_type: object
          variable: arg1
      height: 54
      id: '1768900205298'
      position:
        x: 1024.9180558135995
        y: 291.42564668003666
      positionAbsolute:
        x: 1024.9180558135995
        y: 291.42564668003666
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "from collections import defaultdict\nimport json\n\ndef main(arg1)\
          \ -> dict:\n    \"\"\"\n    æŠŠè¾“å…¥çš„åˆ—è¡¨/JSON åˆå¹¶æˆåˆ†ç»„ Markdownã€‚\n    - æ”¯æŒå­—ç¬¦ä¸² JSON\
          \ / dict åŒ… list / ç›´æ¥ list\n    - æŒ‰ first_id åˆ†ç»„ã€ä¸­æ–‡æ•°å­—é¡ºåºæ’åº\n    - ç»„å†…æŒ‰ second_id/second_marker/order\
          \ æ’åºï¼Œå…œåº•åŸå§‹é¡ºåº\n    - é¿å…é‡å¤è¾“å‡ºäºŒçº§æ ‡é¢˜ï¼ˆè‹¥ content å·²ä»¥åŒæ ·æ ‡é¢˜å¼€å¤´åˆ™è·³è¿‡ï¼‰\n    \"\"\"\n\n   \
          \ def parse_maybe_int(val):\n        \"\"\"æŠŠç±»ä¼¼ '3.' æˆ– '03' ç­‰å­—ç¬¦ä¸²å®‰å…¨è½¬æˆ intï¼Œå¤±è´¥è¿”å›\
          \ Noneã€‚\"\"\"\n        if val is None:\n            return None\n      \
          \  try:\n            return int(str(val).rstrip(\"ã€‚\").rstrip(\".\"))\n\
          \        except Exception:\n            return None\n\n    def ensure_trailing_punct(text:\
          \ str) -> str:\n        if not text:\n            return \"\"\n        if\
          \ text[-1] not in \"ã€‚.!?ï¼ï¼Ÿ\":\n            return text + \"ã€‚\"\n       \
          \ return text\n\n    def normalize_items(raw):\n        \"\"\"ç»Ÿä¸€è½¬æˆ list[dict]ï¼Œæ— æ³•è§£æè¿”å›ç©ºåˆ—è¡¨ã€‚\"\
          \"\"\n        items = raw\n        if isinstance(items, str):\n        \
          \    try:\n                items = json.loads(items)\n            except\
          \ Exception:\n                return []\n        if isinstance(items, dict):\n\
          \            if isinstance(items.get(\"items\"), list):\n              \
          \  items = items[\"items\"]\n            elif isinstance(items.get(\"result\"\
          ), list):\n                items = items[\"result\"]\n            else:\n\
          \                items = [items]\n        if not isinstance(items, list):\n\
          \            return []\n\n        normalized = []\n        for idx, it in\
          \ enumerate(items):\n            if isinstance(it, str):\n             \
          \   try:\n                    it = json.loads(it)\n                except\
          \ Exception:\n                    continue\n            if not isinstance(it,\
          \ dict):\n                continue\n            it = it.copy()\n       \
          \     it[\"first_id\"] = str(it.get(\"first_id\", \"\"))\n            it[\"\
          _index\"] = idx  # ä¿ç•™åŸå§‹é¡ºåº\n            normalized.append(it)\n        return\
          \ normalized\n\n    items = normalize_items(arg1)\n    if not items:\n \
          \       return {\"merged_markdown\": \"\"}\n\n    # åˆ†ç»„\n    grouped = defaultdict(list)\n\
          \    first_seen_index = {}\n    for item in items:\n        fid = item[\"\
          first_id\"]\n        grouped[fid].append(item)\n        first_seen_index.setdefault(fid,\
          \ item[\"_index\"])\n\n    # ç»„å†…æ’åºï¼šä¼˜å…ˆ second_id -> second_marker -> orderï¼Œå…œåº•åŸå§‹é¡ºåº\n\
          \    def item_sort_key(item):\n        num = parse_maybe_int(item.get(\"\
          second_id\"))\n        if num is None:\n            num = parse_maybe_int(item.get(\"\
          second_marker\"))\n        if num is None:\n            num = parse_maybe_int(item.get(\"\
          order\"))\n        if num is None:\n            return (1, item[\"_index\"\
          ])\n        return (0, num)\n\n    for fid in grouped:\n        grouped[fid]\
          \ = sorted(grouped[fid], key=item_sort_key)\n\n    # ä¸€çº§æ’åºï¼šä¸­æ–‡æ•°å­—é¡ºåºï¼ŒæœªçŸ¥çš„æŒ‰å‡ºç°é¡ºåºå…œåº•\n\
          \    cn_order = [\"ä¸€\", \"äºŒ\", \"ä¸‰\", \"å››\", \"äº”\", \"å…­\", \"ä¸ƒ\", \"å…«\"\
          , \"ä¹\", \"å\"]\n    order_map = {k: i for i, k in enumerate(cn_order)}\n\
          \    sorted_fids = sorted(\n        grouped.keys(),\n        key=lambda\
          \ fid: (order_map.get(fid, 999), first_seen_index.get(fid, 10 ** 9)),\n\
          \    )\n\n\n    # æ‹¼è£… Markdown\n    lines = [\"ä¸‰ã€å®¡è®¡å†…å®¹å’Œé‡ç‚¹\"]\n    for fid\
          \ in sorted_fids:\n        section_items = grouped[fid]\n        first_title\
          \ = section_items[0].get(\"first_title\", \"\")\n        lines.append(f\"\
          ï¼ˆ{fid}ï¼‰{first_title}\\n\" if first_title else f\"ï¼ˆ{fid}ï¼‰\\n\")\n\n     \
          \   for item in section_items:\n            marker = str(item.get(\"second_marker\"\
          , \"\") or \"\")\n            title = str(item.get(\"second_title\", \"\"\
          ) or \"\")\n            content = str(item.get(\"content\", \"\") or \"\"\
          )\n\n            heading = \" \".join([marker.strip(), title.strip()]).strip()\n\
          \            heading = ensure_trailing_punct(heading) if heading else \"\
          \"\n\n            # è‹¥å†…å®¹é¦–è¡Œå·²ç»ä»¥åŒæ ·æ ‡é¢˜å¼€å¤´ï¼Œåˆ™ä¸å†é‡å¤è¾“å‡ºæ ‡é¢˜\n            content_first_line\
          \ = content.lstrip().splitlines()[0].strip() if content else \"\"\n    \
          \        compare_heading = heading.rstrip(\"ã€‚\").rstrip(\".\").strip()\n\
          \            heading_in_content = compare_heading and content_first_line.startswith(compare_heading)\n\
          \n            if heading and not heading_in_content:\n                lines.append(heading)\n\
          \            if content:\n                lines.append(content)\n      \
          \      lines.append(\"\")  # é¡¹ä¹‹é—´ç©ºè¡Œ\n\n        lines.append(\"\")  # ä¸€çº§ä¹‹é—´ç©ºè¡Œ\n\
          \n    final_markdown = \"\\n\".join(lines).rstrip()  # å»æ‰æœ«å°¾å¤šä½™æ¢è¡Œ\n    return\
          \ {\"merged_markdown\": final_markdown}"
        code_language: python3
        desc: ''
        outputs:
          merged_markdown:
            children: null
            type: string
        selected: false
        title: æ‹¼æ¥
        type: code
        variables:
        - value_selector:
          - '1768900126443'
          - output
          value_type: array[string]
          variable: arg1
      height: 54
      id: '1768905043926'
      position:
        x: 2158.404974956914
        y: 299.6388937035453
      positionAbsolute:
        x: 2158.404974956914
        y: 299.6388937035453
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 24.814044881161408
      y: 98.07729344584897
      zoom: 0.6597540000452959
